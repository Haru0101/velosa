(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{381:function(a,t,s){"use strict";s.r(t);var r=s(43),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"basic認証の作り方"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#basic認証の作り方"}},[a._v("#")]),a._v(" Basic認証の作り方")]),a._v(" "),s("p",[a._v("Basic認証を行うには、2つのファイルが必要になります。"),s("br"),a._v("\nそれが.htaccessと.htpasswdです。")]),a._v(" "),s("h2",{attrs:{id:"htpasswd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#htpasswd"}},[a._v("#")]),a._v(" .htpasswd")]),a._v(" "),s("h3",{attrs:{id:"役割"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#役割"}},[a._v("#")]),a._v(" 役割")]),a._v(" "),s("p",[a._v(".htpasswdは.htaccessと違いシンプルです。"),s("br"),a._v("\nIDとパスワードを記述するだけ。"),s("br"),a._v("\nそれを管理するためのファイルです。")]),a._v(" "),s("h3",{attrs:{id:"作成方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作成方法"}},[a._v("#")]),a._v(" 作成方法")]),a._v(" "),s("p",[a._v("IDはともかく、パスワードはそのままベタ書きできません。"),s("br"),a._v("\nパスワードを暗号化したものを記述します。")]),a._v(" "),s("p",[a._v("以下のようなジェネレータを用いて生成しましょう。")]),a._v(" "),s("p",[a._v("http://www.luft.co.jp/cgi/htpasswd.php")]),a._v(" "),s("p",[a._v("IDとPWがセットで生成されると思うので、それを.htpasswdに貼り付けるだけ。"),s("br"),a._v("\n.htpasswdはどのディレクトリに配置してもいいですが、.htaccessとなるべく近い場所においていたほうがわかりやすくていいと思います。")]),a._v(" "),s("h2",{attrs:{id:"htaccess"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#htaccess"}},[a._v("#")]),a._v(" .htaccess")]),a._v(" "),s("h3",{attrs:{id:"役割-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#役割-2"}},[a._v("#")]),a._v(" 役割")]),a._v(" "),s("p",[a._v(".htaccessの役割はずばり、認証の方式と先ほど作成した.htpasswd（IDとパスワードを記したファイル）の場所の指定です。"),s("br"),a._v("\n.htpasswdもそうですが、先頭にピリオドのつくファイルは不可視ファイルと呼ばれていて、"),s("br"),a._v("\nそのままではFinderなどで確認できない場合があります。（非表示になっている）"),s("br"),a._v("\nその場合は、MacであればFinderを開いた状態で⌘ + Shift + . というショートカットで表示できます。")]),a._v(" "),s("h3",{attrs:{id:"作成方法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作成方法-2"}},[a._v("#")]),a._v(" 作成方法")]),a._v(" "),s("p",[a._v("作成方法はかんたん。"),s("br"),a._v("\n以下のサンプルをベースに作成してください。")]),a._v(" "),s("p",[a._v("サンプル")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('AuthType Basic\nAuthName "Input your ID and Password."\nAuthUserFile ファイルパス（htpasswdがある場所）\nrequire valid-user\n')])])]),s("p",[a._v("1つ1つ見ていきます。")]),a._v(" "),s("h4",{attrs:{id:"authtype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authtype"}},[a._v("#")]),a._v(" AuthType")]),a._v(" "),s("p",[a._v("これはBasic認証なので、Basicと指定します。"),s("br"),a._v("\nここはいじる必要なしです。")]),a._v(" "),s("h4",{attrs:{id:"authname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authname"}},[a._v("#")]),a._v(" AuthName")]),a._v(" "),s("p",[a._v("ここも内容は何もでいいです。"),s("br"),a._v("\nただ、1つだけ注意点があります。")]),a._v(" "),s("p",[a._v(".htaccessは大体認証を掛けたいファイルと同階層に配置します。"),s("br"),a._v("\nなので、複数のフォルダに、複数の.htaccessを作成することがあると思います。")]),a._v(" "),s("p",[a._v("この時、AuthNameがそれぞれバラバラだと、同じサイトなのに認証のかかった違うページに移動する度にIDとパスワードを要求されてしまいます。"),s("br"),a._v("\n通常は一回認証したら、ページ移動してもそのままサイトを閲覧したいですよね。")]),a._v(" "),s("p",[a._v("そういった理由から、.htaccessを複数作成するときはAuthNameを統一することをオススメします。")]),a._v(" "),s("h4",{attrs:{id:"authuserfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#authuserfile"}},[a._v("#")]),a._v(" AuthUserFile")]),a._v(" "),s("p",[a._v("IDとパスワードを指定した.htpasswdの場所を記します。"),s("br"),a._v("\nルートからのパスを記述する必要があり、これを確認するかんたんな方法があります。")]),a._v(" "),s("p",[a._v("file.phpというファイルを.htpasswdと同階層に作成し、"),s("br"),a._v("\n以下の記述をして保存します。")]),a._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token php language-php"}},[s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("echo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[a._v("__FILE__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("?>")])]),a._v("\n")])])]),s("p",[a._v("ブラウザでfile.phpにアクセスすると、そのファイルまでのフルパスが出力されます。")]),a._v(" "),s("p",[a._v("そのパスの最後の/file.phpを/.htpasswdに置き換えればフルパスの完成です。")]),a._v(" "),s("h4",{attrs:{id:"require"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require"}},[a._v("#")]),a._v(" require")]),a._v(" "),s("p",[a._v("これも内容いじりません。そのまま。"),s("br"),a._v("\nしかし、複数のIDとパスワードを管理したい場合は、"),s("br"),a._v("\nrequire groupなどを活用します。")]),a._v(" "),s("p",[a._v("これについては以下の記事が詳しかったので、そちらをご覧ください。"),s("br"),a._v(" "),s("a",{attrs:{href:"https://httpd.apache.org/docs/2.4/ja/howto/auth.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("認証、承認、アクセス制御"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("作成した.htaccessを認証をかけたいファイルと同階層にアップロードすれば完成です。"),s("br"),a._v("\nこれでページにアクセスすると表示される前にIDとパスワードを要求されるようになります。")])])}),[],!1,null,null,null);t.default=e.exports}}]);